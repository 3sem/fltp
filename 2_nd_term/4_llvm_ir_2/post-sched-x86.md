### Исходный код

Представим простую программу на языке ассемблера, которая выполняет несколько арифметических операций:

```x86asm
# Исходный код
mov eax, [rdi]    ; Загрузить значение из памяти в eax
add eax, [rsi]    ; Добавить значение из другого адреса к eax
mov [rdx], eax    ; Сохранить результат в память
mov ecx, [r8]     ; Загрузить значение в ecx
add ecx, [r9]     ; Добавить значение из другого адреса к ecx
mov [r10], ecx    ; Сохранить результат в память
```

### Шаги оптимизации

#### 1. Скедулирование инструкций

На этапе скедулирования мы стараемся минимизировать задержки, вызванные зависимостями между инструкциями. В нашем случае, порядок операций остаётся неизменным, так как большинство инструкций зависят друг от друга:

```x86asm
# Скедулированные инструкции
mov eax, [rdi]
add eax, [rsi]
mov [rdx], eax
mov ecx, [r8]
add ecx, [r9]
mov [r10], ecx
```

#### 2. Регистровая аллокация

На этапе регистровой аллокации мы распределяем регистры. В нашем случае регистры уже назначены:

```x86asm
# Инструкции после регистровой аллокации
mov eax, [rdi]
add eax, [rsi]
mov [rdx], eax
mov ecx, [r8]
add ecx, [r9]
mov [r10], ecx
```

#### 3. Пост-скедулирование

На этапе пост-скедулирования мы пытаемся улучшить исполнение кода. В нашем случае мы можем заметить, что операции с `eax` и `ecx` могут выполняться параллельно, так как они независимы друг от друга. Мы можем сдвинуть инструкции, чтобы перекрыть длительные операции, такие как доступ к памяти:

```x86asm
# Инструкции после пост-скедулирования
mov eax, [rdi]
mov ecx, [r8]    ; Загрузить значение в ecx параллельно с добавлением в eax
add eax, [rsi]
add ecx, [r9]    ; Добавить значение к ecx параллельно с сохранением eax
mov [rdx], eax
mov [r10], ecx
```

### Результат

Благодаря пост-скедулированию, инструкции с `eax` и `ecx` теперь выполняются параллельно, что позволяет сократить общее время выполнения программы. В данном случае мы перекрыли длительные операции загрузки и сохранения данных с выполнением арифметических операций, что особенно эффективно на современных процессорах с длинными конвейерами и большими задержками памяти.
